<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rainwater Pit Visualization</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #262626;
  }
  .rainwater-pit {
    width: 200px;
    height: 400px;
    background-color: #ddd;
    border: 2px solid #000;
    position: relative;
    overflow: hidden;
    border-radius: 25px;
  }
  .water-level {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 0%; /* Initial state */
    background: linear-gradient(to top, #007bff, #0099ff);
    transition: height 2.5s ease-in-out; /* Adjust the speed as needed */
    animation: waveMotion 3s infinite linear alternate;
  }
  @keyframes waveMotion {
    0% { background-position: 0 0; }
    100% { background-position: 50px 50px; } /* Adjust for desired wave effect */
  }
</style>
</head>
<body>

<div class="rainwater-pit">
  <div class="water-level"></div>
</div>

<script>
  async function fetchWaterLevel() {
    const username = 'yourUsername'; // Replace with your actual username
    const password = 'yourPassword'; // Replace with your actual password
    const headers = new Headers();
    headers.set('Authorization', 'Basic ' + btoa(username + ":" + password));

    try {
      const response = await fetch('http://your-api-url/api/water-level', {method: 'GET', headers: headers});
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      const data = await response.json();
      return data.percentage; // Assuming your API returns JSON with a percentage field
    } catch (error) {
      console.error('Failed to fetch water level:', error);
    }
  }

  async function updateWaterLevel() {
    const percentage = await fetchWaterLevel();
    if (percentage !== null) {
      const waterLevelDiv = document.querySelector('.water-level');
      waterLevelDiv.style.height = `${percentage}%`;
      // Restart animation to simulate water filling
      waterLevelDiv.style.animation = 'none';
      setTimeout(() => {
        waterLevelDiv.style.animation = '';
      }, 10);
    } else {
      console.log('Could not fetch water level data.');
    }
  }

  // Fetch and update water level upon page load
  document.addEventListener('DOMContentLoaded', updateWaterLevel);
</script>

</body>
</html>
