<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rainwater Pit Visualization</title>
<style>
  * {margin: 0; padding: 0; box-sizing: border-box;}
  body {
    width: 100%; 
    height: 100vh; 
    background-color: #262626;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .rainwater-pit {
    position: relative;
    width: 200px; /* Adjust as needed */
    height: 200px; /* Adjust as needed to keep it circular */
    background-color: #fff;
    border: 2px solid #fff;
    border-radius: 50%;
    overflow: hidden;
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
    -webkit-transform: translate3d(0, 0, 0);
    -moz-transform: translate3d(0, 0, 0);
    cursor: pointer;
  }
  .water-level {
    background-color: #3f68c5;
    position: absolute;
    top: 110%;
    left: -50%;
    width: 200%;
    height: 200%;
    border-radius: 38%;
    transform: rotate(0deg);
    transition: all 5s ease;
    animation: wave 30s linear infinite;
  }
  @keyframes wave {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(3600deg); }
  }
  .rainwater-pit:hover .water-level {
    top: 0%;
  }
</style>
</head>
<body>

<div id="rainwaterPit" class="rainwater-pit">
  <div id="waterLevel" class="water-level" style="height: 0%;"> <!-- Initial water level -->
    <!-- Adjust the height here based on the variable -->
  </div>
</div>

<script>
  async function fetchWaterLevel() {
    const username = 'admin'; // Replace with your actual username
    const password = 'secret'; // Replace with your actual password
    const headers = new Headers();
    headers.set('Authorization', 'Basic ' + btoa(username + ":" + password));

    try {
      const response = await fetch('http://your-api-url/api/water-level', {method: 'GET', headers: headers});
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      const data = await response.json();
      return data.percentage; // Assuming your API returns JSON with a percentage field
    } catch (error) {
      console.error('Failed to fetch water level:', error);
    }
  }

  async function updateWaterLevel() {
    const percentage = await fetchWaterLevel();
    if (percentage !== null) {
      document.getElementById('waterLevel').style.height = percentage + '%';
    } else {
      // Handle error or provide a fallback action
      console.log('Could not fetch water level data.');
    }
  }

  // Fetch and update water level upon page load
  document.addEventListener('DOMContentLoaded', updateWaterLevel);
</script>

</body>
</html>
